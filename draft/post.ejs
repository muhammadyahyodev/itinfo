<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/nav.ejs") %>
    <h2><%= post.userId %></h2>
    <p>Post title: <%= post.title %></p>
    <p>Id: <%= post.id %></p>
    <p>Body: <%= post.body %></p>

    <!-- <button><a style="text-decoration: none;" href="/edit-user/<%= user.id %>">Tahrirlash</a></button> -->
    <button>
      <a style="text-decoration: none" href="/edit/<%= post.id %>"
        >Tahrirlash</a
      >
    </button>
    <button data-id="<%= post.id %>" id="del">Delete</button>
    <script>
      const del = document.getElementById("del");
      del.addEventListener("click", (e) => {
        const id = e.target?.dataset?.id || null;
        if (id) {
          fetch(`user${id}`, { method: "DELETE" }).then(() => {
            console.log("DELETED");
            window.location.href = "/posts";
          });
        }
      });
    </script>
  </body>
</html>
